(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{4794:function(a,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks/[id]",function(){return t(9549)}])},3528:function(a,s,t){"use strict";t.d(s,{Z:function(){return d}});var e=t(5893),l=t(1776),i=t.n(l),d=()=>(0,e.jsx)("div",{style:{height:"100%",justifyContent:"center",alignItems:"center"},children:(0,e.jsx)("div",{style:{maxWidth:"960px",margin:"0 auto"},children:(0,e.jsx)("div",{className:i()["lds-dual-ring"]})})})},3150:function(a,s,t){"use strict";var e=t(4011),l=t(6061),i=t(9734);s.Z=a=>l.s?(0,e.s)(a):(0,i.ZP)("/tasks")},9344:function(a,s,t){"use strict";t.d(s,{Az:function(){return i},JF:function(){return n},_d:function(){return d}});var e=t(5472),l=t.n(e);let i=(a,s)=>a.filter(a=>!!(""===s||a.name.includes(s)||a.category.includes(s)||a.author.includes(s)||a.tags.some(a=>a.includes(s)))),d=a=>l()(a,[a=>a.score,a=>a.solved_by.length],["asc","desc"]),n=a=>s=>s.solved_by.map(a=>a.team_id).includes((null==a?void 0:a.team_id)||0)},9549:function(a,s,t){"use strict";t.r(s),t.d(s,{__N_SSG:function(){return w},default:function(){return Z}});var e=t(5893),l=t(6061),i=t(1163),d=t(3528),n=t(75),r=t(3150),o=a=>{let s=a.endsWith("/")?a.slice(0,-1):a,t=s.split("/");return 1===t.length?s:t.slice(0,-1).join("/")},c=t(4902),_=t(7536),u=t(4011),m=t(9344),g=t(7294),k=t(3164),h=t(1615),v=t(6594),x=t(277),f=t.n(x),j=t(1664),p=t.n(j),N=t(5472),b=t.n(N),C=a=>{let{task:s,registerFlag:t,onFlagSubmit:l,onClose:i,isSolved:d}=a,n=b()(s.solved_by,["solved_at"],["asc"]);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:f()["dialog-wrapper"],children:(0,e.jsxs)("div",{className:f().dialog,children:[(0,e.jsxs)("div",{className:f()["dialog-left"],children:[(0,e.jsxs)("div",{className:f()["dialog-head"],children:[d&&"\uD83C\uDF82",s.name," - ",s.score]}),(0,e.jsx)("div",{className:f()["dialog-tags"],children:s.tags.map(a=>(0,e.jsx)("div",{className:f()["dialog-tag"],children:a},a))}),(0,e.jsx)("div",{className:f()["dialog-description"],dangerouslySetInnerHTML:{__html:s.description}}),(0,e.jsx)("div",{className:f()["dialog-attachments"],children:s.attachments&&s.attachments.map(a=>(0,e.jsx)("a",{href:a.url,download:!0,children:a.name},a.name))}),(0,e.jsxs)("div",{className:f()["dialog-author"],children:["author: ",s.author]}),(0,e.jsxs)("form",{onSubmit:l,children:[(0,e.jsx)(h.Z,{type:"text",placeholder:"CakeCTF{NamuNamu...}",...t("flag")}),(0,e.jsx)(v.Z,{type:"submit",children:"Submit"})]})]}),(0,e.jsx)("div",{className:f()["dialog-right"],children:(0,e.jsxs)("div",{className:f()["dialog-right-inner"],children:[(0,e.jsxs)("div",{className:f()["dialog-solvenum"],children:[n.length," solves"]}),(0,e.jsx)("div",{className:f()["dialog-solves"],children:n.map(a=>(0,e.jsx)("div",{className:f()["dialog-solve-team"],children:(0,e.jsx)(p(),{href:"/teams/"+a.team_id,children:a.team_name})},a.team_id))})]})})]})}),(0,e.jsx)("a",{onClick:()=>i(),children:(0,e.jsx)("div",{className:f()["dialog-background"]})})]})},w=!0,Z=a=>{let{taskID:s,tasks:t}=a,h=(0,i.useRouter)(),{data:v,mutate:x}=(0,r.Z)(t),{data:f}=(0,n.Z)(null),{message:j,error:p}=(0,c.Z)(),{register:N,handleSubmit:b}=(0,_.cI)(),w=(0,g.useCallback)((0,m.JF)(f||null),[f]);if(!v||void 0===f)return(0,e.jsx)(d.Z,{});let Z=async a=>{if(!l.s)try{let s=await u.hi.post("/submit",{flag:a.flag});j(s),x()}catch(a){p(a)}},y=v.filter(a=>a.id===s);if(1!==y.length)return(0,e.jsx)(d.Z,{});let T=y[0],F=o(h.pathname);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(C,{task:T,onClose:()=>h.push(F,void 0,{scroll:!1,shallow:!0}),registerFlag:N,onFlagSubmit:b(Z),isSolved:w(T)}),(0,e.jsx)(k.Z,{tasks:v,filterTask:m.Az,sortTask:m._d,isSolved:w})]})}},6594:function(a,s,t){"use strict";var e=t(5893),l=t(4184),i=t.n(l),d=t(2232),n=t.n(d);s.Z=a=>{let{...s}=a;return s.className=i()(s.className,n().button),(0,e.jsx)("button",{...s})}},1615:function(a,s,t){"use strict";var e=t(5893),l=t(7294),i=t(743),d=t.n(i),n=t(4184),r=t.n(n);let o=l.forwardRef((a,s)=>{let{className:t,...l}=a,i=r()(t||"",d().text);return(0,e.jsx)("input",{ref:s,className:i,...l})});s.Z=o},3164:function(a,s,t){"use strict";t.d(s,{Z:function(){return c}});var e=t(5893),l=t(1163);t(7294);var i=t(281),d=t.n(i),n=t(4184),r=t.n(n),o=a=>{let{task:s,isSolved:t}=a,i=(0,l.useRouter)(),n=t?r()(d().task,d()["task-solved"]):d().task;return(0,e.jsx)("a",{className:n,onClick:()=>{i.push("/tasks/"+s.id,void 0,{scroll:!1,shallow:!0})},children:(0,e.jsxs)("div",{className:d()["task-cover"],children:[(0,e.jsx)("div",{className:d()["task-upper"],children:(0,e.jsx)("div",{className:d()["task-name"],children:s.name})}),(0,e.jsx)("div",{className:d()["task-middle"],children:(0,e.jsx)("div",{className:d()["task-score"],children:s.score})}),(0,e.jsxs)("div",{className:d()["task-lower"],children:[(0,e.jsx)("div",{className:d()["task-tags"],children:s.tags.map(a=>(0,e.jsx)("div",{className:d()["task-tag"],children:a},a))}),(0,e.jsxs)("div",{className:d()["task-solves"],children:[s.solved_by.length," solves"]})]})]})})},c=a=>{let{tasks:s,sortTask:t,isSolved:l}=a;return(0,e.jsx)("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, 12rem)"},children:t(s).map(a=>{let s=l(a);return(0,e.jsx)(o,{task:a,isSolved:s},a.id)})})}},2232:function(a){a.exports={button:"button_button__rtTQd"}},743:function(a){a.exports={text:"input_text__0Z5P_"}},281:function(a){a.exports={task:"taskCard_task__cSVQ0","task-cover":"taskCard_task-cover__Gomgx","task-solved":"taskCard_task-solved__heMUo","task-name":"taskCard_task-name__HXQKT","task-upper":"taskCard_task-upper__c12Hi","task-middle":"taskCard_task-middle__yfP4T","task-score":"taskCard_task-score__VrWBW","task-lower":"taskCard_task-lower__1qvbO","task-tags":"taskCard_task-tags__hmPVn","task-tag":"taskCard_task-tag__sivOx","task-solves":"taskCard_task-solves__IKzTb"}},1776:function(a){a.exports={"lds-dual-ring":"loading_lds-dual-ring__qQmZi"}},277:function(a){a.exports={"dialog-head":"taskmodal_dialog-head__gNRrW","dialog-tags":"taskmodal_dialog-tags__buf72","dialog-tag":"taskmodal_dialog-tag__flMeQ","dialog-attachments":"taskmodal_dialog-attachments__gIDfa","dialog-author":"taskmodal_dialog-author__kYuG4",dialog:"taskmodal_dialog__Y5wPl","dialog-left":"taskmodal_dialog-left__N3fiD","dialog-right":"taskmodal_dialog-right__HDGqs","dialog-right-inner":"taskmodal_dialog-right-inner__bTEOP","dialog-solvenum":"taskmodal_dialog-solvenum__FZusR","dialog-solves":"taskmodal_dialog-solves__ZuaDR","dialog-solve-team":"taskmodal_dialog-solve-team__xHqK6","dialog-background":"taskmodal_dialog-background__LF3tH","dialog-wrapper":"taskmodal_dialog-wrapper__3flpn"}}},function(a){a.O(0,[472,536,774,888,179],function(){return a(a.s=4794)}),_N_E=a.O()}]);